<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8"/>
    <title>커뮤니티 글쓰기</title>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>

    <link rel="stylesheet" href="/css/header.css">
    <link rel="stylesheet" href="/css/post-write.css"/>

    <meta name="_csrf" th:content="${_csrf.token}">
    <meta name="_csrf_header" th:content="${_csrf.headerName}">
</head>
<body data-page="create">
<div th:replace="~{fragments/header :: header}"></div>

<h1 class="page-title">커뮤니티 글쓰기</h1>

<div class="container">
    <form th:action="@{/community/posts/interview}" th:object="${form}" method="post" novalidate id="community-post-form">
        <input type="hidden" th:name="${_csrf?.parameterName}" th:value="${_csrf?.token}"/>

        <h2 class="section-title">인터뷰 결과</h2>
        <p class="section-sub">Grade / Score / 상세 피드백을 저장합니다.</p>

        <div class="field">
            <label for="interviewResultId">인터뷰 결과 ID</label>
            <input id="interviewResultId" type="number"
                   th:field="*{interviewShare.interviewResultId}" placeholder="예: 123" required/>
            <div class="error" th:if="${#fields.hasErrors('interviewShare.interviewResultId')}"
                 th:errors="*{interviewShare.interviewResultId}"></div>
            <div class="help">현재는 ID를 수동 입력합니다.</div>
        </div>

        <div class="row">
            <div class="field">
                <label for="grade">등급</label>
                <select id="grade" th:field="*{interviewShare.grade}" required>
                    <option value="">선택</option>
                    <option value="A">A</option><option value="B">B</option><option value="C">C</option>
                    <option value="D">D</option><option value="E">E</option><option value="F">F</option>
                </select>
                <div class="error" th:if="${#fields.hasErrors('interviewShare.grade')}"
                     th:errors="*{interviewShare.grade}"></div>
            </div>

            <div class="field">
                <label for="score">점수</label>
                <input id="score" type="number" th:field="*{interviewShare.score}"
                       min="0" max="100" step="1" placeholder="0~100" required/>
                <div class="error" th:if="${#fields.hasErrors('interviewShare.score')}"
                     th:errors="*{interviewShare.score}"></div>
            </div>
        </div>

        <div class="field">
            <label for="interviewFeedback">상세 피드백</label>
            <textarea id="interviewFeedback" th:field="*{interviewShare.interviewFeedback}"
                      placeholder="면접 상세 피드백을 입력하세요" required></textarea>
            <div class="error" th:if="${#fields.hasErrors('interviewShare.interviewFeedback')}"
                 th:errors="*{interviewShare.interviewFeedback}"></div>
        </div>

        <div class="field">
            <label for="title">제목</label>
            <input id="title" type="text" th:field="*{interviewShare.title}"
                   placeholder="예: 인터뷰 결과 공유" required/>
            <div class="error" th:if="${#fields.hasErrors('interviewShare.title')}"
                 th:errors="*{interviewShare.title}"></div>
        </div>

        <div class="spacer-32"></div>

        <input type="hidden" id="fpType"  th:field="*{freePost.interviewType}" value="PRACTICE"/>
        <input type="hidden" id="fpGrade" th:field="*{freePost.grade}" value="C"/>

        <div class="field">
            <label for="content">추가 메모</label>
            <textarea id="content" th:field="*{freePost.content}" maxlength="1000"
                      placeholder="예: 다음엔 자료구조 파트 더 준비하기…"></textarea>
            <div class="help"><span id="memo-counter">0</span>/1000</div>
            <div class="error" th:if="${#fields.hasErrors('freePost.content')}"
                 th:errors="*{freePost.content}"></div>
        </div>

        <div class="actions">
            <a class="btn btn-secondary" th:href="@{/community}">취소</a>
            <button class="btn btn-primary" id="submitBtn" type="submit">등록</button>
        </div>
    </form>
</div>

<script th:src="@{/js/post-write.js(v=${#dates.createNow().time})}" src="/js/post-write.js" defer></script>
</body>
</html>
